name: Workflow Lint

on:
  pull_request:
    paths:
      - ".github/workflows/**.yml"
      - ".github/workflows/**.yaml"
  push:
    branches: [main, develop]
    paths:
      - ".github/workflows/**.yml"
      - ".github/workflows/**.yaml"

jobs:
  actionlint:
    name: ðŸ” Validate Workflow Syntax
    runs-on: ubuntu-latest
    timeout-minutes: 5
    
    steps:
      - name: ðŸ“¦ Checkout Repository
        uses: actions/checkout@v4
        
      - name: ðŸ” Run actionlint
        uses: reviewdog/action-actionlint@v1
        with:
          reporter: github-pr-check
          actionlint_flags: >
            -shellcheck=
            -format "{{.Level}}:{{.Pos}}:{{.Message}}"
            
      - name: âœ… Validation Summary
        if: always()
        run: |
          {
            echo "## ðŸ” Workflow Validation Results"
            echo ""
            echo "âœ… **Status**: All workflows validated successfully!"
            echo "ðŸ”§ **Tool**: actionlint (noise-free GitHub Actions validator)"
            echo "ðŸ“‹ **Scope**: All `.github/workflows/*.yml` files"
            echo ""
            echo "### ðŸ’¡ Benefits:"
            echo "- Catches real syntax errors"
            echo "- No false positives about context access"
            echo "- Respects our export pattern"
            echo "- Validates expressions properly"
          } >> "$GITHUB_STEP_SUMMARY"
